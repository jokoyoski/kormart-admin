import{u as C,a as T,r as p,j as e,C as D,S as F,I as O,D as A,f as E,c as I,b as M,d as L,E as V,e as _,g as k,P as z}from"./index-Bk_5QplK.js";import{T as B,a as G,b as H}from"./tabs-Bgrybwmo.js";import{u as U}from"./get-orders-YtaMIWLM.js";import{u as $}from"./useTableFilters-C6V-EHDK.js";const q=()=>{const h=C(),[o,d]=T(),{searchFilter:u,currentPage:i,itemsPerPage:c,handleSearchChange:b,setCurrentPage:m}=$({itemsPerPage:20}),[l,f]=p.useState(o.get("tab")||"all");p.useEffect(()=>{const r=new URLSearchParams(o);r.set("tab",l),d(r,{replace:!0})},[l,o,d]);const{data:t,isLoading:v}=U({page:i,search:u,orderStatus:l==="all"?"":l,limit:c}),j=(t==null?void 0:t.data)||[],w=(t==null?void 0:t.meta)||{count:0},y=r=>{f(r),m(0)},N=[{value:"all",label:"All"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"delivered",label:"Delivered"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"returned",label:"Returned"}],P="px-3 h-full data-[state=active]:border-r-2 data-[state=active]:border-primary data-[state=active]:!text-primary data-[state=active]:font-semibold data-[state=active]:font-outfit font-urbanist rounded-none bg-transparent font-regular leading-[140%] text-base uppercase whitespace-nowrap",S=[{header:"NO",accessor:"index",enableSorting:!1,cell:r=>e.jsx("span",{children:i*c+r.row.index+1})},{header:"Order ID",accessor:"orderId",enableSorting:!1,cell:r=>{const a=r.row.original;return e.jsx("span",{className:"block min-w-[120px] font-mono text-sm",children:a.orderId||a.id})}},{header:"Product",accessor:"product",enableSorting:!1,cell:r=>{var s,n;const a=r.row.original;return e.jsxs("div",{className:"min-w-[150px]",children:[e.jsx("div",{className:"font-semibold",children:((s=a.product)==null?void 0:s.name)||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Price: ₦",parseFloat(((n=a.product)==null?void 0:n.price)||0).toLocaleString()]})]})}},{header:"Buyer",accessor:"buyer",enableSorting:!1,cell:r=>{var s,n,x,g;const a=r.row.original;return e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:((n=(s=a.buyer)==null?void 0:s.userDetails)==null?void 0:n.fullName)||((x=a.buyer)==null?void 0:x.email)||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:(g=a.buyer)==null?void 0:g.email})]})}},{header:"Date Created",accessor:"createdAt",enableSorting:!1,cell:r=>{const a=r.getValue();return e.jsx("span",{children:E(new Date(a),"MMM d, yyyy h:mm a")})}},{header:"Amount",accessor:"agreedPrice",enableSorting:!1,cell:r=>{const a=parseFloat(r.getValue()||0);return e.jsxs("span",{className:"font-semibold",children:["₦",a.toLocaleString()]})}},{header:"Order Status",accessor:"orderStatus",enableSorting:!1,cell:r=>{const a=r.getValue();return e.jsx("div",{className:I("w-fit px-3 py-1 rounded-full text-xs font-semibold leading-[140%] flex items-center justify-center",a==="pending"&&"bg-yellow-100 text-yellow-800",a==="processing"&&"bg-blue-100 text-blue-800",a==="delivered"&&"bg-green-100 text-green-800",a==="completed"&&"bg-green-100 text-green-800",a==="cancelled"&&"bg-red-100 text-red-800",a==="returned"&&"bg-orange-100 text-orange-800"),children:(a==null?void 0:a.charAt(0).toUpperCase())+(a==null?void 0:a.slice(1))||"N/A"})}},{header:"",accessor:"action",cell:r=>{const a=r.row.original;return e.jsxs(M,{children:[e.jsx(L,{asChild:!0,onClick:s=>s.stopPropagation(),children:e.jsx("div",{className:"size-[20px] rounded-full p-0 flex items-center justify-center cursor-pointer bg-[#F4F7FE] hover:bg-gray-100 ",children:e.jsx(V,{className:"size-4 text-primary500"})})}),e.jsx(_,{align:"end",className:"w-[159px] py-[10px] border-[#E5E7E8] shadow-[0px_4px_24px_0px_#191B1C29]",children:e.jsxs(k,{className:"p-0 text-sm text-gray600 leading-[140%] px-3 py-1.5",onClick:s=>{s.stopPropagation(),h(`/dashboard/orders/${a.id}`)},children:[e.jsx(z,{className:"mr-2 size-4"}),e.jsx("span",{children:"View Details"})]})})]})}}];return e.jsxs(D,{className:" shadow-none rounded-[8px] bg-white pt-4 pb-4 w-full mt-6",children:[e.jsxs("div",{className:"px-4 mb-6",children:[e.jsx(B,{value:l,onValueChange:y,className:"w-full",children:e.jsx("div",{className:"overflow-x-auto mb-4 scrollbar-hide",children:e.jsx(G,{className:"w-max min-w-full justify-start bg-transparent h-12 items-center p-0 gap-0",children:N.map(r=>e.jsx(H,{value:r.value,className:P,children:r.label},r.value))})})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"relative w-full max-w-[290px]",children:[e.jsx(F,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray900"}),e.jsx(O,{placeholder:"Search orders...",value:u,onChange:b,className:"pl-9 w-full bg-[#F2F3F480] h-10 border-none rounded-[4px]  focus:ring-none text-gray900 text-sm placeholder:text-gray400"})]})})]}),e.jsx("div",{children:e.jsx(A,{tableColumns:S,tableData:j||[],enableGlobalFilter:!0,enablePagination:!0,showPagination:!0,showSearch:!1,perPageOptions:[10,20,30,50],emptyHeading:"No Orders found",emptySubtitle:"There are no Orders matching your search criteria.",loading:v,serverSidePagination:!0,manualPagination:!0,totalItemsCount:w.count,currentPage:i,itemsPerPage:c,onPageChange:m})})]})},W=()=>e.jsxs("div",{className:"w-full px-4 md:px-10",children:[e.jsx("div",{className:" w-full pt-4 ",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-[20px] text-gray900 font-extrabold leading-[140%]",children:"Order"}),e.jsx("p",{className:"mt-1 text-sm text-gray600 leading-[140%]",children:"Here is all your Orders analytics overview"})]})}),e.jsx(q,{})]});export{W as default};
