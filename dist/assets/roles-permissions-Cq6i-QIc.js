import{N as G,l as R,i as A,k as q,t as N,r as f,j as e,C as te,S as M,I as K,B as _,s as F,b as se,d as ae,E as ne,e as le,g as B,x as re,U as Fe,$ as Re,V as H,a0 as De,a1 as oe,a2 as J,a3 as Ie,c as Z,h as Te,X as ie,_ as ce}from"./index-Bk_5QplK.js";import{T as Ae,a as qe,b as ee}from"./tabs-Bgrybwmo.js";import{T as $,a as O,b as I,c as h,d as Q,e as b}from"./table-BsLBivAi.js";import{P as de,T as me,D as xe}from"./DeleteAccountModal-CMfHn3SR.js";import{u as ue}from"./useTableFilters-C6V-EHDK.js";import{S as fe}from"./square-pen-z0gpVYpO.js";import{C as Be}from"./CustomConfirmModal-Rx9wlRAB.js";import{U as Me,a as _e}from"./user-x-DFo2vCQY.js";import{T as Ue}from"./textarea-B0IVzDO7.js";import{u as Ke,S as $e,a as Oe,b as Qe,c as ze,d as We}from"./select-F9hIFfl4.js";import{M as pe}from"./CustomLoaderBtn-Dz2wmlW0.js";const he=(l={},t={})=>G({queryKey:["roles",l],queryFn:async()=>{try{const s=new URLSearchParams;l.page!==void 0&&s.append("page",l.page+1),l.search&&l.search.trim()&&s.append("search",l.search.trim()),l.limit&&s.append("limit",l.limit);const n=s.toString(),r=n?`/roles?${n}`:"/roles";return(await R.get(r)).data}catch(s){throw console.error("Error fetching roles:",s),s}},retry:2,refetchOnWindowFocus:!1,...t}),Ge=(l={})=>G({queryKey:["permissions"],queryFn:async()=>{try{return(await R.get("/roles/permissions")).data}catch(t){throw console.error("Error fetching permissions:",t),t}},retry:2,refetchOnWindowFocus:!1,...l}),He=()=>{const l=A();return q({mutationFn:async t=>(await R.post("/roles",t)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["roles"]}),N.success("Role created successfully!")},onError:t=>{var s,n,r,a;console.error("useCreateRole Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create role. Please try again.")}})},Le=()=>{const l=A();return q({mutationFn:async({roleId:t,payload:s})=>(await R.put("/roles",{roleId:t,...s})).data,onSuccess:(t,s)=>{l.invalidateQueries({queryKey:["roles"]}),l.invalidateQueries({queryKey:["role",s==null?void 0:s.roleId]}),N.success("Role updated successfully!")},onError:t=>{var s,n,r,a;console.error("useUpdateRole Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update role. Please try again.")}})},Ve=()=>{const l=A();return q({mutationFn:async t=>(await R.delete(`/roles/${t}`)).data,onSuccess:(t,s)=>{l.invalidateQueries({queryKey:["roles"]}),l.invalidateQueries({queryKey:["role",s]}),N.success("Role deleted successfully!")},onError:t=>{var s,n,r,a;console.error("Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete role. Please try again.")}})},Xe=({onEditRole:l,handleCreateRole:t})=>{const{searchFilter:s,currentPage:n,itemsPerPage:r,handleSearchChange:a,setCurrentPage:x,clearSearch:p}=ue({itemsPerPage:20}),[y,g]=f.useState(!1),[j,i]=f.useState(null),o=Ve(),{data:d,isLoading:m}=he({page:n,search:s,limit:r}),C=(d==null?void 0:d.data)||[],P=(d==null?void 0:d.meta)||{count:0},w=async()=>{try{await o.mutateAsync(j.id)}catch(c){console.log(c)}finally{i(null),g(!1)}},v={getState:()=>({pagination:{pageIndex:n,pageSize:r}}),setPageIndex:c=>x(c),setPagination:c=>{const S=typeof c=="function"?c({pageIndex:n,pageSize:r}):c;x(S.pageIndex)}},k=c=>c.includes("all")?"All Permissions":c.map(S=>S.replace(/_/g," ").replace(/\b\w/g,E=>E.toUpperCase())).join(", ");return e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:"shadow-none rounded-[8px] bg-white py-4 w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 mb-6 px-4 md:px-7",children:[e.jsx("div",{className:" !text-primary font-semibold font-outfit rounded-none bg-transparent font-regular leading-[140%] text-base uppercase",children:"ROLES"}),e.jsxs("div",{className:"relative w-full sm:max-w-[310px]",children:[e.jsx(M,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(K,{placeholder:"Search Role",value:s,onChange:a,className:"pl-9 w-full bg-[#F2F3F480] h-12 border-none rounded-[4px] focus:ring-none text-gray-900 text-sm placeholder:text-gray-400"})]}),e.jsxs(_,{onClick:t,className:"bg-[#F1C40F] h-[50px] flex justify-center items-center hover:bg-[#F1C40F]/90 text-black font-semibold px-6 py-2 rounded-[4px] whitespace-nowrap",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Role"]})]}),m?e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs($,{className:"w-full min-w-[600px]",children:[e.jsx(O,{className:"border-b border-[#D6DDEB]",children:e.jsxs(I,{className:"border-none hover:bg-transparent",children:[e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Name"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Description"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Permissions"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Created Date"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(Q,{children:[...Array(5)].map((c,S)=>e.jsxs(I,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-8"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-32"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-48"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-32"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-24"})}),e.jsx(b,{className:"py-6 pr-14",children:e.jsx(F,{className:"h-8 w-16"})})]},S))})]})}):C.length===0?e.jsx("div",{className:"w-full flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s?"No roles found":"No roles yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s?`We couldn't find any roles matching "${s}". Try adjusting your search.`:"Get started by creating your first role."}),s?e.jsx(_,{variant:"outline",onClick:p,className:"text-blue100 border-blue100 hover:bg-blue-50",children:"Clear search"}):e.jsxs(_,{variant:"primary",onClick:()=>l(),className:"bg-blue100 text-white",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add New Role"]})]})}):e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs($,{className:"w-full min-w-[600px]",children:[e.jsx(O,{className:"border-b border-[#D6DDEB]",children:e.jsxs(I,{className:"border-none hover:bg-transparent",children:[e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Name"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Description"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Permissions"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Created Date"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(Q,{children:C.map((c,S)=>e.jsxs(I,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:n*r+S+1}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:c.name}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left max-w-[200px]",children:e.jsx("div",{className:"truncate",title:c.description||"No description",children:c.description||"No description"})}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left max-w-[300px]",children:e.jsx("div",{className:"truncate capitalize",title:k(c.permissions),children:k(c.permissions)})}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:new Date(c.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx(b,{className:"py-3 pr-14",children:e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,onClick:E=>E.stopPropagation(),children:e.jsxs("button",{className:"border-[#CCCCF5] border flex items-center justify-center text-[#646464] hover:bg-gray-50 text-sm font-bold w-[90px] h-[37px] bg-transparent rounded-[4px]",children:[e.jsx(ne,{className:"w-3 h-3 mr-2.5"}),"Actions"]})}),e.jsxs(le,{align:"end",className:"w-[150px]",children:[e.jsxs(B,{onClick:E=>{E.stopPropagation(),l(c)},children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(B,{onClick:E=>{E.stopPropagation(),i(c),g(!0)},className:"text-red-600",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},c.id))})]})})]}),!m&&C.length>0&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-3 border-t border-[#E5E7E8] px-2 py-6 md:flex-row md:items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",n*r+1," to"," ",Math.min((n+1)*r,P.count)," of"," ",P.count," entries"]}),e.jsx(re,{table:v,totalItemsCount:P.count,showPagination:!0,serverSidePagination:!0,loading:m})]})})]}),e.jsx(xe,{open:y,setOpen:g,title:"Delete Role",confirmText:"Yes, delete role",onConfirm:w,isLoading:o.isPending,children:e.jsxs("p",{className:"text-sm leading-[150%] text-gray800",children:[e.jsx("span",{className:"font-medium text-neutralBlack",children:"Are you sure you want to delete this role?"})," ","This action cannot be undone. Please confirm if you want to proceed."]})})]})},Ye=(l={},t={})=>G({queryKey:["staff",l],queryFn:async()=>{try{const s=new URLSearchParams;l.page!==void 0&&s.append("page",l.page+1),l.search&&l.search.trim()&&s.append("search",l.search.trim()),l.limit&&s.append("limit",l.limit);const n=s.toString(),r=n?`/staffs?${n}`:"/staffs";return(await R.get(r)).data}catch(s){throw console.error("Error fetching staff:",s),s}},retry:2,refetchOnWindowFocus:!1,...t}),Je=()=>{const l=A();return q({mutationFn:async t=>(await R.post("/staffs/add-new-staff",t)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["staff"]}),N.success("Staff member created successfully!")},onError:t=>{var s,n,r,a;console.error("useCreateStaff Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create staff member. Please try again.")}})},Ze=()=>{const l=A();return q({mutationFn:async({staffId:t,payload:s})=>(await R.put(`/staffs/add-new-staff/${t}`,s)).data,onSuccess:(t,s)=>{l.invalidateQueries({queryKey:["staff"]}),l.invalidateQueries({queryKey:["staff-member",s==null?void 0:s.staffId]}),N.success("Staff member updated successfully!")},onError:t=>{var s,n,r,a;console.error("useUpdateStaff Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update staff member. Please try again.")}})},et=()=>{const l=A();return q({mutationFn:async t=>(await R.delete(`/staffs/${t}`)).data,onSuccess:(t,s)=>{l.invalidateQueries({queryKey:["staff"]}),l.invalidateQueries({queryKey:["staff-member",s]}),N.success("Staff member deleted successfully!")},onError:t=>{var s,n,r,a;console.error("Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete staff member. Please try again.")}})},tt=()=>{const l=A();return q({mutationFn:async t=>(await R.patch(`/staffs/activate-staff/${t}`)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["staff"]}),N.success("Staff member activated successfully!")},onError:t=>{var s,n,r,a;console.error("useActivateStaff Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to activate staff member. Please try again.")}})},st=()=>{const l=A();return q({mutationFn:async t=>(await R.patch(`/staffs/deactivate-staff/${t}`)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["staff"]}),N.success("Staff member deactivated successfully!")},onError:t=>{var s,n,r,a;console.error("useDeactivateStaff Error:",t),N.error(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.detail)||((a=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to deactivate staff member. Please try again.")}})},at=({onEditStaff:l,handleCreateStaff:t})=>{const{searchFilter:s,currentPage:n,itemsPerPage:r,handleSearchChange:a,setCurrentPage:x,clearSearch:p}=ue({itemsPerPage:20}),[y,g]=f.useState(!1),[j,i]=f.useState(null),[o,d]=f.useState(!1),[m,C]=f.useState(null),P=et(),w=tt(),v=st(),{data:k,isLoading:c}=Ye({page:n,search:s,limit:r}),S=(k==null?void 0:k.data)||[],E=(k==null?void 0:k.meta)||{count:0},W=async()=>{try{await P.mutateAsync(j.id)}catch(u){console.log(u)}finally{i(null),g(!1)}},Se=u=>{C({type:"activate",title:"Activate Staff Member",message:`Are you sure you want to activate ${u.name}?`,action:()=>w.mutateAsync(u.id)}),d(!0)},ke=u=>{C({type:"deactivate",title:"Deactivate Staff Member",message:`Are you sure you want to deactivate ${u.name}?`,action:()=>v.mutateAsync(u.id)}),d(!0)},Pe=async()=>{try{await m.action(),d(!1),C(null)}catch(u){console.error("Action failed:",u)}},Ee={getState:()=>({pagination:{pageIndex:n,pageSize:r}}),setPageIndex:u=>x(u),setPagination:u=>{const U=typeof u=="function"?u({pageIndex:n,pageSize:r}):u;x(U.pageIndex)}};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:"shadow-none rounded-[8px] bg-white py-4 w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 mb-6 px-4 md:px-7",children:[e.jsx("div",{className:"  !text-primary font-semibold font-outfit rounded-none bg-transparent font-regular leading-[140%] text-base uppercase",children:"STAFF MEMBERS"}),e.jsxs("div",{className:"relative w-full sm:max-w-[310px]",children:[e.jsx(M,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(K,{placeholder:"Search Members",value:s,onChange:a,className:"pl-9 w-full bg-[#F2F3F480] h-12 border-none rounded-[4px] focus:ring-none text-gray-900 text-sm placeholder:text-gray-400"})]}),e.jsxs(_,{onClick:t,className:"bg-[#F1C40F] h-[50px] flex justify-center items-center hover:bg-[#F1C40F]/90 text-black font-semibold px-6 py-2 rounded-[4px] whitespace-nowrap",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Members"]})]}),c?e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs($,{className:"w-full min-w-[600px]",children:[e.jsx(O,{className:"border-b border-[#D6DDEB]",children:e.jsxs(I,{className:"border-none hover:bg-transparent",children:[e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Full Name"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Email"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Role"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Status"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(Q,{children:[...Array(5)].map((u,U)=>e.jsxs(I,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-8"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-32"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-48"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-24"})}),e.jsx(b,{className:"py-3 pl-8",children:e.jsx(F,{className:"h-7 w-16"})}),e.jsx(b,{className:"py-3 pr-14",children:e.jsx(F,{className:"h-8 w-16"})})]},U))})]})}):S.length===0?e.jsx("div",{className:"w-full flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s?"No staff members found":"No staff members yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s?`We couldn't find any staff members matching "${s}". Try adjusting your search.`:"Get started by adding your first staff member."}),s?e.jsx(_,{variant:"outline",onClick:p,className:"text-blue100 border-blue100 hover:bg-blue-50",children:"Clear search"}):e.jsxs(_,{variant:"primary",onClick:()=>l(),className:"bg-blue100 text-white",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add New Staff Member"]})]})}):e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs($,{className:"w-full min-w-[600px]",children:[e.jsx(O,{className:"border-b border-[#D6DDEB]",children:e.jsxs(I,{className:"border-none hover:bg-transparent",children:[e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Full Name"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Email"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Role"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Status"}),e.jsx(h,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(Q,{children:S.map((u,U)=>{var X,Y;return e.jsxs(I,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:n*r+U+1}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:u.name}),e.jsx("div",{className:"text-sm text-gray-500",children:u.email})]})}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:u.email}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((Y=(X=u.roles)==null?void 0:X[0])==null?void 0:Y.name)||"No Role"})}),e.jsx(b,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.isActive?"Active":"Inactive"})}),e.jsx(b,{className:"py-6 pr-14",children:e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,onClick:D=>D.stopPropagation(),children:e.jsxs("button",{className:"border-[#CCCCF5] border flex items-center justify-center text-[#646464] hover:bg-gray-50 text-sm font-bold w-[90px] h-[37px] bg-transparent rounded-[4px]",children:[e.jsx(ne,{className:"w-3 h-3 mr-2.5"}),"Actions"]})}),e.jsxs(le,{align:"end",className:"w-[180px]",children:[e.jsxs(B,{onClick:D=>{D.stopPropagation(),l(u)},children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),u.isActive?e.jsxs(B,{className:"text-red-600",onClick:D=>{D.stopPropagation(),ke(u)},children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Deactivate"})]}):e.jsxs(B,{className:"text-green-600",onClick:D=>{D.stopPropagation(),Se(u)},children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Activate"})]}),e.jsxs(B,{onClick:D=>{D.stopPropagation(),i(u),g(!0)},className:"text-red-600",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},u.id)})})]})})]}),!c&&S.length>0&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-3 border-t border-[#E5E7E8] px-2 py-6 md:flex-row md:items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",n*r+1," to"," ",Math.min((n+1)*r,E.count)," of"," ",E.count," entries"]}),e.jsx(re,{table:Ee,totalItemsCount:E.count,showPagination:!0,serverSidePagination:!0,loading:c})]})})]}),e.jsx(xe,{open:y,setOpen:g,title:"Delete Staff Member",confirmText:"Yes, delete staff member",onConfirm:W,isLoading:P.isPending,children:e.jsxs("p",{className:"text-sm leading-[150%] text-gray800",children:[e.jsx("span",{className:"font-medium text-neutralBlack",children:"Are you sure you want to delete this staff member?"})," ","This action cannot be undone. Please confirm if you want to proceed."]})}),e.jsx(Be,{open:o,setOpen:d,title:(m==null?void 0:m.title)||"Confirm Action",secondaryBtnText:(m==null?void 0:m.title)||"Confirm",actionType:(m==null?void 0:m.type)||"default",onSecondaryBtnClick:Pe,isLoading:w.isPending||v.isPending,children:e.jsx("p",{className:"text-sm text-gray-600",children:(m==null?void 0:m.message)||"Are you sure you want to perform this action?"})})]})};var z="Checkbox",[nt,Nt]=Fe(z),[lt,L]=nt(z);function rt(l){const{__scopeCheckbox:t,checked:s,children:n,defaultChecked:r,disabled:a,form:x,name:p,onCheckedChange:y,required:g,value:j="on",internal_do_not_use_render:i}=l,[o,d]=De({prop:s,defaultProp:r??!1,onChange:y,caller:z}),[m,C]=f.useState(null),[P,w]=f.useState(null),v=f.useRef(!1),k=m?!!x||!!m.closest("form"):!0,c={checked:o,disabled:a,setChecked:d,control:m,setControl:C,name:p,form:x,value:j,hasConsumerStoppedPropagationRef:v,required:g,defaultChecked:T(r)?!1:r,isFormControl:k,bubbleInput:P,setBubbleInput:w};return e.jsx(lt,{scope:t,...c,children:ot(i)?i(c):n})}var be="CheckboxTrigger",ge=f.forwardRef(({__scopeCheckbox:l,onKeyDown:t,onClick:s,...n},r)=>{const{control:a,value:x,disabled:p,checked:y,required:g,setControl:j,setChecked:i,hasConsumerStoppedPropagationRef:o,isFormControl:d,bubbleInput:m}=L(be,l),C=oe(r,j),P=f.useRef(y);return f.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const v=()=>i(P.current);return w.addEventListener("reset",v),()=>w.removeEventListener("reset",v)}},[a,i]),e.jsx(H.button,{type:"button",role:"checkbox","aria-checked":T(y)?"mixed":y,"aria-required":g,"data-state":ve(y),"data-disabled":p?"":void 0,disabled:p,value:x,...n,ref:C,onKeyDown:J(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:J(s,w=>{i(v=>T(v)?!0:!v),m&&d&&(o.current=w.isPropagationStopped(),o.current||w.stopPropagation())})})});ge.displayName=be;var V=f.forwardRef((l,t)=>{const{__scopeCheckbox:s,name:n,checked:r,defaultChecked:a,required:x,disabled:p,value:y,onCheckedChange:g,form:j,...i}=l;return e.jsx(rt,{__scopeCheckbox:s,checked:r,defaultChecked:a,disabled:p,required:x,onCheckedChange:g,name:n,form:j,value:y,internal_do_not_use_render:({isFormControl:o})=>e.jsxs(e.Fragment,{children:[e.jsx(ge,{...i,ref:t,__scopeCheckbox:s}),o&&e.jsx(we,{__scopeCheckbox:s})]})})});V.displayName=z;var ye="CheckboxIndicator",je=f.forwardRef((l,t)=>{const{__scopeCheckbox:s,forceMount:n,...r}=l,a=L(ye,s);return e.jsx(Re,{present:n||T(a.checked)||a.checked===!0,children:e.jsx(H.span,{"data-state":ve(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...l.style}})})});je.displayName=ye;var Ne="CheckboxBubbleInput",we=f.forwardRef(({__scopeCheckbox:l,...t},s)=>{const{control:n,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:x,required:p,disabled:y,name:g,value:j,form:i,bubbleInput:o,setBubbleInput:d}=L(Ne,l),m=oe(s,d),C=Ke(a),P=Ie(n);f.useEffect(()=>{const v=o;if(!v)return;const k=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(k,"checked").set,E=!r.current;if(C!==a&&S){const W=new Event("click",{bubbles:E});v.indeterminate=T(a),S.call(v,T(a)?!1:a),v.dispatchEvent(W)}},[o,C,a,r]);const w=f.useRef(T(a)?!1:a);return e.jsx(H.input,{type:"checkbox","aria-hidden":!0,defaultChecked:x??w.current,required:p,disabled:y,name:g,value:j,form:i,...t,tabIndex:-1,ref:m,style:{...t.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});we.displayName=Ne;function ot(l){return typeof l=="function"}function T(l){return l==="indeterminate"}function ve(l){return T(l)?"indeterminate":l?"checked":"unchecked"}const Ce=f.forwardRef(({className:l,...t},s)=>e.jsx(V,{ref:s,className:Z("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",l),...t,children:e.jsx(je,{className:Z("flex items-center justify-center"),children:e.jsx(Te,{className:"h-4 w-4"})})}));Ce.displayName=V.displayName;const it=({isOpen:l,onClose:t,onSubmit:s,initialData:n=null,isLoading:r=!1})=>{const[a,x]=f.useState({name:"",description:"",permissions:[]}),{data:p}=Ge(),y=(p==null?void 0:p.data)||[];f.useEffect(()=>{x(n?{name:n.name||"",description:n.description||"",permissions:n.permissions||[]}:{name:"",description:"",permissions:[]})},[n,l]);const g=(o,d)=>{x(d?m=>({...m,permissions:[...m.permissions,o]}):m=>({...m,permissions:m.permissions.filter(C=>C!==o)}))},j=o=>{if(o.preventDefault(),!a.name.trim()){N.error("Role name is required");return}if(a.permissions.length===0){N.error("Please select at least one permission");return}const d={name:a.name.trim(),description:a.description.trim(),permissions:a.permissions};s(d)},i=()=>{r||t()};return e.jsxs(pe,{isOpen:l,onClose:i,className:"rounded-[12px] px-4 md:px-8 py-8 max-w-[580px] !w-full h-fit max-h-[690px] md:max-h-[725px] overflow-y-auto shadow-[0px_4px_24px_0px_rgba(0,0,0,0.15)]",maxWidth:580,containerClassName:"px-4",children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"pb-4 border-b border-[#D6DDEB] mb-5",children:[e.jsx("h3",{className:"text-[23px] font-extrabold text-[#3F3F3F] mb-1.5",children:n?"Edit Role":"Create Role"}),e.jsx("p",{className:"text-base text-[#939393]",children:"This information can be created and edited"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:"Role Name"}),e.jsx(K,{type:"text",placeholder:"Role name",value:a.name,onChange:o=>x(d=>({...d,name:o.target.value})),className:"w-full !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white p-2 text-sm leading-[140%]",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:"Description"}),e.jsx(Ue,{placeholder:"Role description",value:a.description,onChange:o=>x(d=>({...d,description:o.target.value})),className:"w-full min-h-[100px] resize-none border border-gray-300 rounded-[4px] px-4 placeholder:text-[#32475C99] text-sm",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-3",children:"Permissions"}),e.jsx("div",{className:"border border-gray-300 rounded-[4px] p-4 max-h-[200px] overflow-y-auto",children:y.map(o=>e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Ce,{id:o,checked:a.permissions.includes(o),onCheckedChange:d=>g(o,d),disabled:r}),e.jsx("label",{htmlFor:o,className:"text-sm font-medium text-[#25324B] cursor-pointer",children:o.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())})]},o))}),a.permissions.length>0&&e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Selected: ",a.permissions.join(", ")]})]}),e.jsxs("div",{className:"flex pt-4 md:items-center md:justify-center gap-4 flex-col md:flex-row",children:[e.jsx("button",{type:"button",onClick:i,disabled:r,className:"w-full h-[50px] md:w-fit px-5 flex items-center justify-center rounded-[10px] border border-black text-black font-semibold text-base leading-[17px]",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r||!a.name.trim()||a.permissions.length===0,className:"w-full md:w-fit h-[50px] px-5 bg-secondary hover:bg-secondary/90 text-black rounded-[10px] font-bold text-base leading-[17px]",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 animate-spin"}),n?"Updating...":"Creating..."]}):n?"Update Role":"Save Role"})]})]})]})},ct=({isOpen:l,onClose:t,onSubmit:s,initialData:n=null,isLoading:r=!1})=>{const[a,x]=f.useState({name:"",email:"",roleId:""}),{data:p}=he({limit:100}),y=(p==null?void 0:p.data)||[];f.useEffect(()=>{var i,o;x(n?{name:n.name||"",email:n.email||"",roleId:((o=(i=n.roles)==null?void 0:i[0])==null?void 0:o.id)||""}:{name:"",email:"",roleId:""})},[n,l]);const g=i=>{if(i.preventDefault(),!a.name.trim()){N.error("Staff name is required");return}if(!a.email.trim()){N.error("Email is required");return}if(!a.roleId){N.error("Please select a role");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){N.error("Please enter a valid email address");return}const d={name:a.name.trim(),email:a.email.trim(),role:a.roleId};s(d)},j=()=>{r||t()};return e.jsxs(pe,{isOpen:l,onClose:j,className:"rounded-[12px] px-4 md:px-8 py-8 max-w-[580px] !w-full h-fit max-h-[690px] md:max-h-[725px] overflow-y-auto shadow-[0px_4px_24px_0px_rgba(0,0,0,0.15)]",maxWidth:580,containerClassName:"px-4",children:[e.jsx("button",{onClick:j,className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"pb-4 border-b border-[#D6DDEB] mb-5",children:[e.jsx("h3",{className:"text-[23px] font-extrabold text-[#3F3F3F] mb-1.5",children:n?"Edit Staff Member":"Create Staff Member"}),e.jsx("p",{className:"text-base text-[#939393]",children:"This information can be created and edited"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:"Full Name"}),e.jsx(K,{type:"text",placeholder:"Staff member name",value:a.name,onChange:i=>x(o=>({...o,name:i.target.value})),className:"w-full !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white p-2 text-sm leading-[140%]",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:"Email Address"}),e.jsx(K,{type:"email",placeholder:"staff@example.com",value:a.email,onChange:i=>x(o=>({...o,email:i.target.value})),className:"w-full !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white p-2 text-sm leading-[140%]",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:"Role"}),e.jsxs($e,{value:a.roleId,onValueChange:i=>x(o=>({...o,roleId:i})),disabled:r,children:[e.jsx(Oe,{className:"w-full !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white",children:e.jsx(Qe,{placeholder:"Select a role"})}),e.jsx(ze,{children:y.map(i=>e.jsx(We,{value:i.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsx("span",{className:"text-xs text-gray-500",children:i.description})]})},i.id))})]})]}),e.jsxs("div",{className:"flex pt-4 md:items-center md:justify-center gap-4 flex-col md:flex-row",children:[e.jsx("button",{type:"button",onClick:j,disabled:r,className:"w-full h-[50px] md:w-fit px-5 flex items-center justify-center rounded-[10px] border border-black text-black font-semibold text-base leading-[17px]",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r||!a.name.trim()||!a.email.trim()||!a.roleId,className:"w-full md:w-fit h-[50px] px-5 bg-secondary hover:bg-secondary/90 text-black rounded-[10px] font-bold text-base leading-[17px]",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 animate-spin"}),n?"Updating...":"Creating..."]}):n?"Update Staff Member":"Save Staff Member"})]})]})]})},wt=()=>{const[l,t]=f.useState("members"),[s,n]=f.useState(!1),[r,a]=f.useState(!1),[x,p]=f.useState(null),[y,g]=f.useState(null),j=He(),i=Le(),o=Je(),d=Ze(),m=()=>{p(null),n(!0)},C=(c=null)=>{p(c),n(!0)},P=async c=>{try{x?await i.mutateAsync({roleId:x.id,payload:c}):await j.mutateAsync(c),n(!1),p(null)}catch(S){console.log(S)}},w=()=>{g(null),a(!0)},v=(c=null)=>{g(c),a(!0)},k=async c=>{try{y?await d.mutateAsync({staffId:y.id,payload:c}):await o.mutateAsync(c),a(!1),g(null)}catch(S){console.log(S)}};return e.jsxs("div",{className:"w-full px-4 md:px-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Roles and Permissions"}),e.jsx("p",{className:"text-gray-600",children:"Here is all your kormat analytics overview"})]}),e.jsxs(Ae,{value:l,onValueChange:t,className:"w-full",children:[e.jsxs(qe,{className:"mb-5 w-full justify-start  h-[33px]  items-start p-0 px-4 md:px-8 gap-8 bg-white",children:[e.jsx(ee,{value:"members",className:"data-[state=active]:font-bold text-[#939393] data-[state=active]:text-[#3F3F3F] data-[state=active]:border-b-2 data-[state=active]:border-black !px-0 w-fit mx-0 pt-0",children:"Members"}),e.jsx(ee,{value:"roles",className:"data-[state=active]:font-bold text-[#939393] data-[state=active]:text-[#3F3F3F] data-[state=active]:border-b-2 data-[state=active]:border-black !px-0 w-fit mx-0 pt-0",children:"Roles"})]}),l==="members"&&e.jsx("div",{className:"w-full",children:e.jsx(at,{onEditStaff:v,handleCreateStaff:w})}),l==="roles"&&e.jsx("div",{className:"w-full",children:e.jsx(Xe,{onEditRole:C,handleCreateRole:m})})]}),e.jsx(it,{isOpen:s,onClose:()=>n(!1),onSubmit:P,initialData:x,isLoading:(j==null?void 0:j.isPending)||(i==null?void 0:i.isPending)}),e.jsx(ct,{isOpen:r,onClose:()=>a(!1),onSubmit:k,initialData:y,isLoading:(o==null?void 0:o.isPending)||(d==null?void 0:d.isPending)})]})};export{wt as default};
