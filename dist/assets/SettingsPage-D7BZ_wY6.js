import{K as m,k as u,t as c,l as h,as as w,j as s,C as g,at as d,B as i,au as j,av as b}from"./index-Bk_5QplK.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],y=m("lock",f);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],P=m("shield",N),v=()=>u({mutationFn:async({currentPassword:e,newPassword:a,confirmPassword:r})=>(await h.post("/staffs/reset-password",{currentPassword:e,newPassword:a,confirmPassword:r})).data,onSuccess:()=>{c.success("Password changed successfully")},onError:e=>{var a,r,t,n;console.error("useResetPassword Error:",e),c.error(((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.detail)||((n=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to change password. Please try again.")}}),S=()=>{const{mutate:e,isPending:a}=v(),{register:r,handleSubmit:t,reset:n,formState:{errors:l}}=w({resolver:j(b),defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""}}),x=async o=>{e({currentPassword:o.oldPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword},{onSuccess:()=>{n()}})},p=o=>{console.error("Form errors:",o),c.error("Please check the form for errors")};return s.jsx("div",{className:"w-full px-4 md:px-10",children:s.jsxs("div",{className:"w-full pt-4 pb-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-[20px] text-gray900 font-extrabold leading-[140%]",children:"Settings"}),s.jsx("p",{className:"mt-1 text-sm text-gray600 leading-[140%]",children:"Manage your account settings and password"})]}),s.jsx("div",{className:"",children:s.jsxs(g,{className:"p-6 w-full",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-gray100",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(y,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-bold text-gray900",children:"Change Password"}),s.jsx("p",{className:"text-sm text-gray600",children:"Update your password to keep your account secure"})]})]}),s.jsxs("form",{onSubmit:t(x,p),children:[s.jsxs("div",{className:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsx(d,{label:"Old Password",name:"oldPassword",type:"password",placeholder:"Enter your current password",register:r,errors:l}),s.jsx(d,{label:"New Password",name:"newPassword",type:"password",placeholder:"Enter your new password",register:r,errors:l}),s.jsx(d,{label:"Confirm New Password",name:"confirmPassword",type:"password",placeholder:"Confirm your new password",register:r,errors:l})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(P,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-xs text-blue-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Password Requirements:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[s.jsx("li",{children:"At least 8 characters long"}),s.jsx("li",{children:"Contains at least one uppercase letter"}),s.jsx("li",{children:"Contains at least one lowercase letter"}),s.jsx("li",{children:"Contains at least one number"})]})]})]})}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(i,{type:"submit",className:"w-[200px] rounded-[2px] text-sm leading-[140%] font-publicSans",isLoading:a,disabled:a,children:s.jsx("span",{className:"font-semibold",children:a?"Changing Password...":"Change Password"})}),s.jsx(i,{type:"button",variant:"outline",onClick:()=>n(),className:"px-6 rounded-[2px] text-sm leading-[140%] font-publicSans",disabled:a,children:s.jsx("span",{className:"font-semibold",children:"Cancel"})})]})]})]})})]})})};export{S as default};
