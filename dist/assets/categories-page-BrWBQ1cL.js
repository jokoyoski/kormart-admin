import{u as z,r as w,j as e,C as Y,S,I as _,B as C,s as m,b as $,d as q,E as W,e as J,g as E,x as K}from"./index-Bk_5QplK.js";import{u as Q,a as R,b as V,c as X,C as Z}from"./CreateCategoryModal-BOnR2KYI.js";import{P as ee,T as te,D as se}from"./DeleteAccountModal-CMfHn3SR.js";import{T as F,a as T,b,c as s,d as M,e as a}from"./table-BsLBivAi.js";import{u as ae}from"./useTableFilters-C6V-EHDK.js";import{S as le}from"./square-pen-z0gpVYpO.js";import"./textarea-B0IVzDO7.js";import"./CustomLoaderBtn-Dz2wmlW0.js";const he=()=>{const k=z(),{searchFilter:r,currentPage:i,itemsPerPage:o,handleSearchChange:A,setCurrentPage:v,clearSearch:B}=ae({itemsPerPage:20}),[I,u]=w.useState(!1),[l,x]=w.useState(null),[O,h]=w.useState(!1),g=Q(),f=R(),y=V(),{data:c,isLoading:p}=X({page:i,search:r,limit:o}),j=(c==null?void 0:c.data)||[],N=(c==null?void 0:c.meta)||{count:0},P=()=>{x(null),h(!0)},U=t=>{x(t),h(!0)},G=async t=>{try{l?await f.mutateAsync({category_id:l==null?void 0:l.id,payload:{name:t==null?void 0:t.name,description:t==null?void 0:t.description,imageUrl:t==null?void 0:t.image}}):await g.mutateAsync({name:t==null?void 0:t.name,description:t==null?void 0:t.description,imageUrl:t==null?void 0:t.image}),h(!1),x(null)}catch(n){console.log(n)}},H=async()=>{try{await y.mutateAsync(l==null?void 0:l.id)}catch(t){console.log(t)}finally{x(null),u(!1)}},L={getState:()=>({pagination:{pageIndex:i,pageSize:o}}),setPageIndex:t=>v(t),setPagination:t=>{const n=typeof t=="function"?t({pageIndex:i,pageSize:o}):t;v(n.pageIndex)}};return e.jsxs("div",{className:"w-full px-4 md:px-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage Categories"}),e.jsx("p",{className:"text-gray-600",children:"Here is all your categories overview"})]}),e.jsxs(Y,{className:"shadow-none rounded-[8px] bg-white py-4 w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 mb-6 px-4 md:px-8",children:[e.jsx("div",{className:"h-full  !text-primary font-semibold font-outfit  rounded-none bg-transparent font-regular leading-[140%] text-base uppercase",children:"CATEGORY"}),e.jsxs("div",{className:"relative w-full sm:max-w-[310px]",children:[e.jsx(S,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(_,{placeholder:"Search Category",value:r,onChange:A,className:"pl-9 w-full bg-[#F2F3F480] h-12 border-none rounded-[4px] focus:ring-none text-gray-900 text-sm placeholder:text-gray-400"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:e.jsx(C,{onClick:P,className:"bg-[#F1C40F] h-[50px] flex justify-center items-center hover:bg-[#F1C40F]/90 text-black font-semibold px-6 py-2 rounded-[4px] whitespace-nowrap",children:"Create Category"})})]}),p?e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs(F,{className:"w-full min-w-[600px]",children:[e.jsx(T,{className:"border-b border-[#D6DDEB]",children:e.jsxs(b,{className:"border-none hover:bg-transparent",children:[e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Name of Category"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Description"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"No of Sub-category"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(M,{children:[...Array(5)].map((t,n)=>e.jsxs(b,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(a,{className:"py-3 pl-8",children:e.jsx(m,{className:"h-7 w-8"})}),e.jsx(a,{className:"py-3 pl-8",children:e.jsx(m,{className:"h-7 w-32"})}),e.jsx(a,{className:"py-3 pl-8",children:e.jsx(m,{className:"h-7 w-48"})}),e.jsx(a,{className:"py-3 pl-8",children:e.jsx(m,{className:"h-7 w-16"})}),e.jsx(a,{className:"py-3 pr-14",children:e.jsx(m,{className:"h-8 w-16"})})]},n))})]})}):j.length===0?e.jsx("div",{className:"w-full flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?"No categories found":"No categories yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r?`We couldn't find any categories matching "${r}". Try adjusting your search.`:"Get started by creating your first category."}),r?e.jsx(C,{variant:"outline",onClick:B,className:"text-blue100 border-blue100 hover:bg-blue-50",children:"Clear search"}):e.jsxs(C,{variant:"primary",onClick:P,className:"bg-blue100 text-white",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Add New Category"]})]})}):e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs(F,{className:"w-full min-w-[600px]",children:[e.jsx(T,{className:"border-b border-[#D6DDEB]",children:e.jsxs(b,{className:"border-none hover:bg-transparent",children:[e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Name of Category"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Description"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"No of Sub-category"}),e.jsx(s,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(M,{children:j.map((t,n)=>{var D;return e.jsxs(b,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors cursor-pointer",onClick:()=>k(`/dashboard/category/${t.id}`),children:[e.jsx(a,{className:"py-6 pl-8 font-semibold text-base text-[#25324B]",children:i*o+n+1}),e.jsx(a,{className:"py-3 pl-8 text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.imageUrl||"/placeholder.png",alt:t.name,className:"w-10 h-10 rounded-[4px] object-cover"}),e.jsx("span",{className:"font-semibold text-base text-[#25324B]",children:t.name})]})}),e.jsx(a,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left max-w-[200px]",children:e.jsx("div",{className:"truncate",title:t.description||"No description",children:t.description||"No description"})}),e.jsx(a,{className:"py-3 pl-8 font-semibold text-base text-[#25324B] text-left",children:((D=t.subCategories)==null?void 0:D.length)||0}),e.jsx(a,{className:"py-3 pr-14",children:e.jsxs($,{children:[e.jsx(q,{asChild:!0,onClick:d=>d.stopPropagation(),children:e.jsxs("button",{className:"border-[#CCCCF5] border flex items-center justify-center text-[#646464] hover:bg-gray-50 text-sm font-bold w-[90px] h-[37px] bg-transparent rounded-[4px]",children:[e.jsx(W,{className:"w-3 h-3 mr-2.5"}),"Actions"]})}),e.jsxs(J,{align:"end",className:"w-[150px]",children:[e.jsxs(E,{onClick:d=>{d.stopPropagation(),U(t)},children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsxs(E,{onClick:d=>{d.stopPropagation(),x(t),u(!0)},className:"text-red-600",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},t.id)})})]})})]}),!p&&j.length>0&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-3 border-t border-[#E5E7E8] px-2 py-6 md:flex-row md:items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",i*o+1," to"," ",Math.min((i+1)*o,N.count)," of"," ",N.count," entries"]}),e.jsx(K,{table:L,totalItemsCount:N.count,showPagination:!0,serverSidePagination:!0,loading:p})]})})]}),e.jsx(Z,{isOpen:O,onClose:()=>h(!1),onSubmit:G,initialData:l,isLoading:(g==null?void 0:g.isPending)||(f==null?void 0:f.isPending)}),e.jsx(se,{open:I,setOpen:u,title:"Delete Category",confirmText:"Yes, delete category",onConfirm:H,isLoading:y.isPending,children:e.jsxs("p",{className:"text-sm leading-[150%] text-gray800",children:[e.jsx("span",{className:"font-medium text-neutralBlack",children:"Are you sure you want to delete this category?"})," ","This action cannot be undone. and it will remove all sub categories attached to it. Please confirm if you want to proceed."]})})]})};export{he as default};
