import{r as a,a as M}from"./index-Bk_5QplK.js";function W(R,u,f,S){var p=this,s=a.useRef(null),c=a.useRef(0),v=a.useRef(0),t=a.useRef(null),o=a.useRef([]),l=a.useRef(),h=a.useRef(),d=a.useRef(R),g=a.useRef(!0);d.current=R;var b=typeof window<"u",E=!u&&u!==0&&b;if(typeof R!="function")throw new TypeError("Expected a function");u=+u||0;var A=!!(f=f||{}).leading,x=!("trailing"in f)||!!f.trailing,w="maxWait"in f,F="debounceOnServer"in f&&!!f.debounceOnServer,e=w?Math.max(+f.maxWait||0,u):null;a.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var n=a.useMemo(function(){var m=function(r){var i=o.current,T=l.current;return o.current=l.current=null,c.current=r,v.current=v.current||r,h.current=d.current.apply(T,i)},P=function(r,i){E&&cancelAnimationFrame(t.current),t.current=E?requestAnimationFrame(r):setTimeout(r,i)},O=function(r){if(!g.current)return!1;var i=r-s.current;return!s.current||i>=u||i<0||w&&r-c.current>=e},j=function(r){return t.current=null,x&&o.current?m(r):(o.current=l.current=null,h.current)},D=function r(){var i=Date.now();if(A&&v.current===c.current&&y(),O(i))return j(i);if(g.current){var T=u-(i-s.current),I=w?Math.min(T,e-(i-c.current)):T;P(r,I)}},y=function(){},C=function(){if(b||F){var r=Date.now(),i=O(r);if(o.current=[].slice.call(arguments),l.current=p,s.current=r,i){if(!t.current&&g.current)return c.current=s.current,P(D,u),A?m(s.current):h.current;if(w)return P(D,u),m(s.current)}return t.current||P(D,u),h.current}};return C.cancel=function(){var r=t.current;r&&(E?cancelAnimationFrame(t.current):clearTimeout(t.current)),c.current=0,o.current=s.current=l.current=t.current=null},C.isPending=function(){return!!t.current},C.flush=function(){return t.current?j(Date.now()):h.current},C},[A,w,u,e,x,E,b,F,S]);return n}const L=(R={})=>{const{itemsPerPage:u=20,debounceDelay:f=500,searchParam:S="search",pageParam:p="page",additionalParams:s={}}=R,[c,v]=M(),[t,o]=a.useState(c.get(S)||""),[l,h]=a.useState(parseInt(c.get(p)||"0")),[d,g]=a.useState(()=>{const e={};return Object.keys(s).forEach(n=>{e[n]=c.get(n)||s[n]}),e}),b=W(e=>{o(e),h(0)},f);return a.useEffect(()=>{const e=new URLSearchParams;t&&e.set(S,t),l>0&&e.set(p,l.toString()),Object.keys(d).forEach(n=>{d[n]&&e.set(n,d[n])}),v(e,{replace:!0})},[t,l,d,v,S,p]),a.useEffect(()=>{const e=c.get(S)||"",n=parseInt(c.get(p)||"0");o(e),h(n);const m={};Object.keys(s).forEach(P=>{m[P]=c.get(P)||s[P]}),g(m)},[c,S,p]),{searchFilter:t,currentPage:l,itemsPerPage:u,additionalState:d,setCurrentPage:e=>{h(e)},handleSearchChange:e=>{const n=e.target.value;o(n),b(n)},clearSearch:()=>{o(""),b("")},handleTabChange:e=>{h(0)},updateAdditionalState:(e,n)=>{g(m=>({...m,[e]:n}))}}};export{L as u};
