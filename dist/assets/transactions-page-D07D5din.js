import{K as O,N as J,i as X,k as Y,t as B,l as Q,r as S,j as e,C as G,s as d,I as F,B as j,_ as I,a4 as Z,S as U,c as L,x as R}from"./index-Bk_5QplK.js";import{S as V,a as q,b as z,c as K,d as u}from"./select-F9hIFfl4.js";import{T as M,a as W,b as v,c as i,d as _,e as c}from"./table-BsLBivAi.js";import{T as ee,a as ae,b as H}from"./tabs-Bgrybwmo.js";import{u as te}from"./useTableFilters-C6V-EHDK.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],le=O("funnel",se),ne=(x={})=>J({queryKey:["service-charges"],queryFn:async()=>{try{return(await Q.get("/staffs/service-charges")).data}catch(l){throw console.error("Error fetching service charges:",l),l}},retry:2,refetchOnWindowFocus:!1,...x}),re=()=>{const x=X();return Y({mutationFn:async l=>(await Q.post("/staffs/update-service-charge",l)).data,onSuccess:()=>{x.invalidateQueries({queryKey:["service-charges"]}),B.success("Service charge updated successfully!")},onError:l=>{var n,r,s,m;console.error("useUpdateServiceCharge Error:",l),B.error(((r=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:r.detail)||((m=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:m.message)||"Failed to update service charge. Please try again.")}})},ie=()=>{const{data:x,isLoading:l}=ne(),n=re(),r=(x==null?void 0:x.data)||{},[s,m]=S.useState({uploadProduct:"",kormatShield:""});S.useEffect(()=>{var t,o;(r.uploadProduct!==void 0||r.kormatShield!==void 0)&&m({uploadProduct:((t=r.uploadProduct)==null?void 0:t.toString())||"",kormatShield:((o=r.kormatShield)==null?void 0:o.toString())||""})},[r]);const b=(t,o)=>{const p=o.replace(/[^0-9]/g,"");m(f=>({...f,[t]:p}))},N=async t=>{const o=parseFloat(s[t]);if(!(!o||o<=0))try{await n.mutateAsync({action:t,amount:o})}catch(p){console.error("Error updating charge:",p)}},h=t=>({uploadProduct:"Upload Product Charge",kormatShield:"Kormat Shield Charge"})[t]||t;return e.jsx("div",{className:"w-full",children:e.jsx(G,{className:"shadow-none rounded-[8px] bg-white py-4 w-full mt-5",children:e.jsxs("div",{className:"px-4 md:px-7",children:[e.jsxs("div",{className:"pb-4 border-b border-[#D6DDEB] mb-5",children:[e.jsx("h3",{className:"text-[23px] font-extrabold text-[#3F3F3F] mb-1.5",children:"Service Charges Configuration"}),e.jsx("p",{className:"text-base text-[#939393]",children:"Update service charges for upload product and kormat shield"})]}),l?e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(d,{className:"h-5 w-40 mb-2"}),e.jsx(d,{className:"h-[50px] w-full"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"h-5 w-40 mb-2"}),e.jsx(d,{className:"h-[50px] w-full"})]})]}):e.jsxs("div",{className:"space-y-5 md:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:h("uploadProduct")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(F,{type:"text",placeholder:"Enter amount",value:s.uploadProduct,onChange:t=>b("uploadProduct",t.target.value),className:"flex-1 !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white p-2 text-sm leading-[140%]",disabled:n.isPending}),e.jsx(j,{type:"button",onClick:()=>N("uploadProduct"),disabled:n.isPending||!s.uploadProduct||parseFloat(s.uploadProduct)<=0||parseFloat(s.uploadProduct)===parseFloat(r.uploadProduct),className:"h-[50px] px-5 bg-secondary hover:bg-secondary/90 text-black rounded-[10px] font-bold text-base leading-[17px]",children:n.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 animate-spin"}),"Updating..."]}):"Update"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#25324B] mb-2",children:h("kormatShield")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(F,{type:"text",placeholder:"Enter amount",value:s.kormatShield,onChange:t=>b("kormatShield",t.target.value),className:"flex-1 !h-[50px] border border-gray-300 rounded-[4px] px-4 focus:ring-2 focus:ring-primary focus:border-transparent outline-none bg-white p-2 text-sm leading-[140%]",disabled:n.isPending}),e.jsx(j,{type:"button",onClick:()=>N("kormatShield"),disabled:n.isPending||!s.kormatShield||parseFloat(s.kormatShield)<=0||parseFloat(s.kormatShield)===parseFloat(r.kormatShield),className:"h-[50px] px-5 bg-secondary hover:bg-secondary/90 text-black rounded-[10px] font-bold text-base leading-[17px]",children:n.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 animate-spin"}),"Updating..."]}):"Update"})]})]})]})]})})})},me=()=>{const[x,l]=S.useState("transactions"),{searchFilter:n,currentPage:r,itemsPerPage:s,handleSearchChange:m,setCurrentPage:b,additionalState:N,updateAdditionalState:h}=te({itemsPerPage:20,additionalParams:{transactionType:"",transactionStatus:""}}),{transactionType:t,transactionStatus:o}=N,{data:p,isLoading:f}=Z({page:r,search:n,transactionType:t,transactionStatus:o,limit:s}),y=(p==null?void 0:p.data)||[],w=(p==null?void 0:p.meta)||{count:0},C=()=>{h("transactionType",""),h("transactionStatus",""),b(0)},$={getState:()=>({pagination:{pageIndex:r,pageSize:s}}),setPageIndex:a=>b(a),setPagination:a=>{const g=typeof a=="function"?a({pageIndex:r,pageSize:s}):a;b(g.pageIndex)}};return e.jsx("div",{className:"w-full px-4 md:px-10",children:e.jsxs("div",{className:"w-full pt-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Transactions"}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor all transaction activities"})]}),e.jsxs(ee,{value:x,onValueChange:l,className:"w-full",children:[e.jsxs(ae,{className:"mb-5 w-full justify-start h-[33px] items-start p-0 px-4 md:px-8 gap-8 bg-white",children:[e.jsx(H,{value:"transactions",className:"data-[state=active]:font-bold text-[#939393] data-[state=active]:text-[#3F3F3F] data-[state=active]:border-b-2 data-[state=active]:border-black !px-0 w-fit mx-0 pt-0",children:"Transactions"}),e.jsx(H,{value:"service-config",className:"data-[state=active]:font-bold text-[#939393] data-[state=active]:text-[#3F3F3F] data-[state=active]:border-b-2 data-[state=active]:border-black !px-0 w-fit mx-0 pt-0",children:"Service Configuration"})]}),x==="transactions"&&e.jsx("div",{className:"w-full",children:e.jsxs(G,{className:"shadow-none rounded-[8px] bg-white py-4 w-full mt-5",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 px-4 md:px-7",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(F,{placeholder:"Search transactions...",value:n,onChange:m,className:"pl-9 w-full bg-[#F2F3F480] h-12 border-none rounded-[4px] focus:ring-none text-gray-900 text-sm placeholder:text-gray-400"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-full lg:w-[200px]",children:e.jsxs(V,{value:t||"all",onValueChange:a=>h("transactionType",a==="all"?"":a),children:[e.jsx(q,{className:"h-12 bg-[#F2F3F480] border-none",children:e.jsx(z,{placeholder:"Transaction Type"})}),e.jsxs(K,{children:[e.jsx(u,{value:"all",children:"All Types"}),e.jsx(u,{value:"deposit",children:"Deposit"}),e.jsx(u,{value:"withdrawal",children:"Withdrawal"})]})]})}),e.jsx("div",{className:"w-full lg:w-[200px]",children:e.jsxs(V,{value:o||"all",onValueChange:a=>h("transactionStatus",a==="all"?"":a),children:[e.jsx(q,{className:"h-12 bg-[#F2F3F480] border-none",children:e.jsx(z,{placeholder:"Status"})}),e.jsxs(K,{children:[e.jsx(u,{value:"all",children:"All Status"}),e.jsx(u,{value:"pending",children:"Pending"}),e.jsx(u,{value:"success",children:"Success"}),e.jsx(u,{value:"failed",children:"Failed"})]})]})})]}),e.jsxs(j,{variant:"outline",onClick:C,className:"h-12 px-4 border-gray-300",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),f?e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs(M,{className:"w-full min-w-[800px]",children:[e.jsx(W,{className:"border-b border-[#D6DDEB]",children:e.jsxs(v,{className:"border-none hover:bg-transparent",children:[e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Transaction ID"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"User"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Amount"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Type"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Status"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Date"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(_,{children:[...Array(5)].map((a,g)=>e.jsxs(v,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-8"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-32"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-48"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-24"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-20"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-16"})}),e.jsx(c,{className:"py-3 pl-8",children:e.jsx(d,{className:"h-7 w-24"})}),e.jsx(c,{className:"py-6 pr-14",children:e.jsx(d,{className:"h-8 w-16"})})]},g))})]})}):y.length===0?e.jsx("div",{className:"w-full flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n||t||o?"No transactions found":"No transactions yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:n||t||o?"We couldn't find any transactions matching your criteria. Try adjusting your filters.":"Transactions will appear here once they are created."}),(n||t||o)&&e.jsx(j,{variant:"outline",onClick:C,className:"text-blue100 border-blue100 hover:bg-blue-50",children:"Clear filters"})]})}):e.jsx("div",{className:"overflow-x-auto mt-8",children:e.jsxs(M,{className:"w-full min-w-[800px]",children:[e.jsx(W,{className:"border-b border-[#D6DDEB]",children:e.jsxs(v,{className:"border-none hover:bg-transparent",children:[e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-16 pb-6",children:"#"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Transaction ID"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"User"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Amount"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Type"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Status"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 pb-6",children:"Date"}),e.jsx(i,{className:"text-left font-bold font-outfit text-base leading-[140%] text-[#646464] pl-8 w-10 pb-6"})]})}),e.jsx(_,{children:y.map((a,g)=>{var T,P,k,D,E,A;return e.jsxs(v,{className:"border-none border-[#E5E7E8] hover:bg-[#F0F6FF] transition-colors",children:[e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:r*s+g+1}),e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:a.transactionID||a.transactionReference}),e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:((T=a.user)==null?void 0:T.email)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:(P=a.user)!=null&&P.id?`ID: ${a.user.id.slice(0,8)}...`:""})]})}),e.jsxs(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:["â‚¦",parseFloat(a.amount).toLocaleString()]}),e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:e.jsx("span",{className:L("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.transactionType==="deposit"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:((k=a.transactionType)==null?void 0:k.charAt(0).toUpperCase())+((D=a.transactionType)==null?void 0:D.slice(1))||"N/A"})}),e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:e.jsx("span",{className:L("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.status==="success"?"bg-green-100 text-green-800":a.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:((E=a.status)==null?void 0:E.charAt(0).toUpperCase())+((A=a.status)==null?void 0:A.slice(1))||"N/A"})}),e.jsx(c,{className:"py-3 pl-8 font-semibold text-base text-[#25324B]",children:new Date(a.createdAt).toLocaleDateString()}),e.jsx(c,{className:"py-6 pr-14",children:e.jsx(j,{variant:"outline",size:"sm",className:"h-8 px-3 text-xs",onClick:()=>{window.location.href=`/dashboard/transactions/${a.id}`},children:"View Details"})})]},a.id)})})]})}),!f&&y.length>0&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-3 border-t border-[#E5E7E8] px-2 py-6 md:flex-row md:items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",r*s+1," to"," ",Math.min((r+1)*s,w.count)," of"," ",w.count," entries"]}),e.jsx(R,{table:$,totalItemsCount:w.count,showPagination:!0,serverSidePagination:!0,loading:f})]})})]})}),x==="service-config"&&e.jsx("div",{className:"w-full",children:e.jsx(ie,{})})]})]})})};export{me as default};
