import{K as X,i as he,k as pe,t as G,l as ue,r as N,j as e,X as je,B as Q,w as fe,y as be,L as ye,C as ie,z as ge,A as ce,M as oe}from"./index-Bk_5QplK.js";import{e as Ne,A as $,a as K,b as W,c as se,d as te}from"./avatar-DdseYVQZ.js";import{S as ve,a as De,b as we,c as Fe,d as re}from"./select-F9hIFfl4.js";import{T as ke}from"./textarea-B0IVzDO7.js";import{a as Ce}from"./index-B_V9z94i.js";import{C as Ee}from"./CustomConfirmModal-Rx9wlRAB.js";import{g as Se}from"./statusConfigs-DJkoG-UX.js";import"./CustomLoaderBtn-Dz2wmlW0.js";import"./circle-x-DakC9dnq.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],de=X("file",Ie);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xe=X("mail",Ae);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],me=X("phone",Re);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Me=X("send-horizontal",Be),Pe=()=>{const d=he();return pe({mutationFn:async l=>(await ue.post("/staffs/reply-dispute",l)).data,onSuccess:(l,t)=>{d.invalidateQueries({queryKey:["dispute-details",t.disputeId]}),d.invalidateQueries({queryKey:["disputes"]}),G.success("Reply sent successfully!")},onError:l=>{var t,n,x,f;console.error("useReplyDispute Error:",l),G.error(((n=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:n.detail)||((f=(x=l==null?void 0:l.response)==null?void 0:x.data)==null?void 0:f.message)||"Failed to send reply. Please try again.")}})},Te=d=>{const l=he();return pe({mutationFn:async()=>(await ue.post(`/staffs/resolve-dispute/${d}`,{})).data,onSuccess:()=>{l.invalidateQueries({queryKey:["dispute-details",d]}),l.invalidateQueries({queryKey:["disputes"]}),G.success("Dispute Resolved successfully!")},onError:t=>{var n,x,f,o;console.error("useReplyDispute Error:",t),G.error(((x=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:x.detail)||((o=(f=t==null?void 0:t.response)==null?void 0:f.data)==null?void 0:o.message)||"Failed to resolve dispute. Please try again.")}})},ze=({isOpen:d,onClose:l,dispute:t,replyToMessage:n=null,initialContent:x=""})=>{var k,C,E,H,S,I,A,R,B,M,P,T,z,L,U,q,_,r,a,p,i,u;const[f,o]=N.useState([]),[g,w]=N.useState(""),[V,b]=N.useState(""),{mutate:Y,isPending:F}=Pe();if(N.useEffect(()=>{d||(w(x||""),o([]),b(""))},[d,x]),N.useEffect(()=>{var c,h,m,y,j,D;if(d&&n){const ae=n.senderId,le=((c=t==null?void 0:t.order)==null?void 0:c.buyerId)||((m=(h=t==null?void 0:t.order)==null?void 0:h.buyer)==null?void 0:m.id),ne=((y=t==null?void 0:t.order)==null?void 0:y.sellerId)||((D=(j=t==null?void 0:t.order)==null?void 0:j.seller)==null?void 0:D.id);ae===le?(b("buyer"),o([le])):ae===ne&&(b("seller"),o([ne]))}else d&&!n&&(b(""),o([]))},[d,n,t]),!d||!t)return null;const s=((k=t==null?void 0:t.order)==null?void 0:k.buyerId)||((E=(C=t==null?void 0:t.order)==null?void 0:C.buyer)==null?void 0:E.id),Z=((H=t==null?void 0:t.order)==null?void 0:H.sellerId)||((I=(S=t==null?void 0:t.order)==null?void 0:S.seller)==null?void 0:I.id),v=((B=(R=(A=t==null?void 0:t.order)==null?void 0:A.buyer)==null?void 0:R.userDetails)==null?void 0:B.fullName)||((T=(P=(M=t==null?void 0:t.order)==null?void 0:M.buyer)==null?void 0:P.userDetails)==null?void 0:T.username)||((L=(z=t==null?void 0:t.order)==null?void 0:z.buyer)==null?void 0:L.email)||"Buyer",O=((_=(q=(U=t==null?void 0:t.order)==null?void 0:U.seller)==null?void 0:q.userDetails)==null?void 0:_.fullName)||((p=(a=(r=t==null?void 0:t.order)==null?void 0:r.seller)==null?void 0:a.userDetails)==null?void 0:p.username)||((u=(i=t==null?void 0:t.order)==null?void 0:i.seller)==null?void 0:u.email)||"Seller",J=c=>{b(c),o(c==="buyer"?[s]:c==="seller"?[Z]:c==="both"?[s,Z]:[])},ee=()=>{if(!g.trim()||f.length===0)return;const c={disputeId:t.id,messageType:"text",content:g.trim(),targetedParticipants:f,...n&&{replyTo:n.id}};Y(c,{onSuccess:()=>{w(""),o([]),b(""),l()}})};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 p-6",children:[e.jsx("button",{onClick:l,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"h-5 w-5"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:n?"Reply to Message":"Send Message"}),e.jsx("p",{className:"text-gray-600",children:n?"Reply to this message from the participant":"Send a message to the buyer, seller, or both"}),n&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded border border-[#E7E7E7]",children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Replying to:"}),e.jsx("p",{className:"text-sm text-[#3F3F3F]",children:n.content})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Who are you replying to"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ve,{value:V,onValueChange:J,disabled:!!n,children:[e.jsx(De,{className:"w-full",children:e.jsx(we,{placeholder:"Select recipient(s)"})}),e.jsxs(Fe,{children:[e.jsxs(re,{value:"buyer",children:[v," (Buyer)"]}),e.jsxs(re,{value:"seller",children:[O," (Seller)"]}),e.jsxs(re,{value:"both",children:["Both (",v," & ",O,")"]})]})]}),n&&e.jsx("p",{className:"text-xs text-[#939393] mt-1",children:"Recipient is automatically set based on the message you're replying to"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ke,{value:g,onChange:c=>w(c.target.value),placeholder:"Enter your message...",rows:5,className:"resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Q,{onClick:l,className:"flex-1 border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",disabled:F,children:"Cancel"}),e.jsx(Q,{onClick:ee,className:"flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-3",disabled:F||!g.trim()||f.length===0,children:F?"Sending...":"Send Reply"})]})]})]})]})},Oe=()=>{var S,I,A,R,B,M,P,T,z,L,U,q,_;const{id:d}=fe(),[l,t]=N.useState(!1),[n,x]=N.useState(null),[f,o]=N.useState(!1),[g,w]=N.useState(""),V=Te(d),{data:b,isLoading:Y,error:F}=Ne(d),s=b==null?void 0:b.data,v=(S=s==null?void 0:s.disputeChat)!=null&&S.messages?[...s.disputeChat.messages].sort((r,a)=>new Date(r.createdAt)-new Date(a.createdAt)):[],O=((I=s==null?void 0:s.disputeChat)==null?void 0:I.participants)||[],J=r=>v.find(a=>a.id===r),ee=r=>{x(r),t(!0)},k=r=>{const a=document.getElementById(`message-${r}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("ring-2","ring-primary","ring-opacity-50"),setTimeout(()=>{a.classList.remove("ring-2","ring-primary","ring-opacity-50")},2e3))},C=r=>{var u,c;if(!r.senderId)return{name:"Admin",avatar:"/user-avatar.png",initials:"AD",isAdmin:!0};const a=(u=s==null?void 0:s.order)==null?void 0:u.buyer,p=(c=s==null?void 0:s.order)==null?void 0:c.seller;if((a==null?void 0:a.id)===r.senderId){const h=a.userDetails||{},m=h.fullName||h.username||a.email||"Buyer",y=h.avatar||null,j=m.split(" "),D=j.length>=2?(j[0][0]+j[1][0]).toUpperCase():m.substring(0,2).toUpperCase();return{name:m,avatar:y,initials:D,isAdmin:!1,role:"buyer"}}if((p==null?void 0:p.id)===r.senderId){const h=p.userDetails||{},m=h.fullName||h.username||p.email||"Seller",y=h.avatar||null,j=m.split(" "),D=j.length>=2?(j[0][0]+j[1][0]).toUpperCase():m.substring(0,2).toUpperCase();return{name:m,avatar:y,initials:D,isAdmin:!1,role:"seller"}}const i=O.find(h=>h.userId===r.senderId);if(i){const m=(i.user||{}).email||`User (${i.role})`||"User",y=m.split(" "),j=y.length>=2?(y[0][0]+y[1][0]).toUpperCase():m.substring(0,2).toUpperCase();return{name:m,avatar:null,initials:j,isAdmin:!1,role:i.role}}return{name:"User",avatar:null,initials:"US",isAdmin:!1}},E=r=>{if(r.messageType==="image"&&(r.content.startsWith("http")||r.content.startsWith("https")))return e.jsx("a",{className:"mt-2",href:r.content,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:r.content,alt:"Dispute attachment",className:"max-w-full h-auto rounded-lg max-h-[200px] object-cover border border-gray-200"})});const a=/(https?:\/\/[^\s]+)/g,p=r.content.split(a);return e.jsx("p",{className:"text-gray-900 text-sm leading-relaxed whitespace-pre-wrap",children:p.map((i,u)=>i.match(a)?e.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-all",children:i},u):i)})},H=async()=>{try{await V.mutateAsync({}),o(!1)}catch(r){console.log(r),o(!1)}};return Y?e.jsx("div",{className:"w-full px-4 md:px-10 pt-4",children:e.jsx("div",{className:"flex justify-center items-center h-[400px]",children:e.jsx(be,{})})}):F||!s?e.jsx("div",{className:"w-full px-4 md:px-10 pt-4",children:e.jsx("div",{className:"flex justify-center items-center h-[400px]",children:e.jsx("h3",{className:"text-xl font-medium text-red-500",children:"Error loading dispute. Please try again."})})}):e.jsxs("div",{className:"w-full px-4 md:px-10",children:[e.jsxs("div",{className:"w-full pt-4 flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-10 md:mb-[50px]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-[20px] text-gray900 font-extrabold leading-[140%]",children:"Disputes & support"}),e.jsxs("div",{className:"mt-1 flex items-center gap-1.5 text-sm text-[#50555C]",children:[e.jsx(ye,{to:"/dashboard/disputes",className:"cursor-pointer",children:"Ticket and support"}),e.jsx(Ce,{}),e.jsx("span",{children:"View Details"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-11 w-[157px] text-sm font-outfit font-semibold text-white cursor-pointer !bg-primary rounded-[10px] flex justify-center items-center",onClick:()=>{x(null),t(!0)},children:"Send Message To"}),s.status!=="resolved"&&e.jsx(Q,{variant:"outline",className:"h-11 w-[157px] text-sm font-outfit font-semibold text-primary cursor-pointer !bg-transparent rounded-[10px] flex justify-center items-center",onClick:()=>{x(null),o(!0)},children:"Resolve Dispute"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ie,{className:"bg-white rounded-[4px] px-4 md:px-7 py-10 md:pt-[52px] md:pb-4",children:[e.jsxs("div",{className:"flex flex-col  mb-8 md:mb-10 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`size-[14px] rounded-full ${Se(s.status).bg}`}),e.jsxs("h3",{className:"font-semibold text-black",children:["Dispute # ",s.ticketNumber]})]}),e.jsxs("span",{className:"text-sm font-outfit pl-5 text-[#84818A]",children:["Created ",ge(s.createdAt)]})]}),e.jsx("h4",{className:"text-lg font-bold text-black mb-3",children:s.reason||"Dispute"}),s.additionalInformation&&e.jsx("p",{className:"text-[#84818A] text-sm font-medium leading-relaxed mb-6",children:s.additionalInformation}),s.documents&&s.documents.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-3",children:"Dispute Documents:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.documents.map((r,a)=>e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 py-2 px-4 bg-white border border-[#D6DDEB] rounded-[4px] hover:bg-gray-50",children:[e.jsx(de,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-600",children:["Document ",a+1]})]},a))})]}),s.order&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-[#E7E7E7]",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Order ID"}),e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:s.order.orderId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Transaction Reference"}),e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:s.order.transactionReference||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Amount"}),e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:ce(s.order.agreedPrice)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Order Status"}),e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F] capitalize",children:s.order.orderStatus})]}),s.order.deliveryInformation&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-[#939393] mb-1",children:"Delivery Information"}),e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:s.order.deliveryInformation})]})]})]}),((A=s.order)==null?void 0:A.product)&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-[#E7E7E7]",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Product Information"}),e.jsxs("div",{className:"flex gap-4",children:[s.order.product.images&&s.order.product.images.length>0&&e.jsx("img",{src:s.order.product.images[0],alt:s.order.product.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F] mb-1",children:s.order.product.name}),s.order.product.description&&e.jsx("p",{className:"text-xs text-[#939393] line-clamp-2",children:s.order.product.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("p",{className:"text-xs text-[#939393]",children:["Price:"," ",e.jsx("span",{className:"font-medium text-[#3F3F3F]",children:ce(s.order.product.price)})]}),s.order.product.state&&e.jsxs("p",{className:"text-xs text-[#939393]",children:["Location:"," ",e.jsx("span",{className:"font-medium text-[#3F3F3F]",children:s.order.product.state})]})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Conversation"}),v.length>0?e.jsx("div",{className:"space-y-4 max-h-[700px] overflow-y-auto pr-2",children:v.map(r=>{const a=C(r),p=a.isAdmin,i=r.replyTo?J(r.replyTo):null,u=i?C(i):null;return e.jsx("div",{id:`message-${r.id}`,className:"transition-all duration-200",children:p?e.jsxs("div",{className:"flex items-start gap-3 justify-end pl-8",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-end max-w-[85%] min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-[#25324B] text-sm",children:a.name})}),r.replyTo&&i&&u&&e.jsxs("button",{onClick:()=>k(r.replyTo),className:"w-full text-left bg-primary/5 border-r-3 border-primary/40 rounded-l px-3 py-2 mb-2 hover:bg-primary/10 hover:border-primary/60 transition-all cursor-pointer group/reply",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 justify-end",children:[e.jsx("span",{className:"text-xs font-medium text-[#646464]",children:u.name}),e.jsx("svg",{className:"w-3 h-3 text-primary/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})]}),e.jsx("p",{className:"text-xs text-[#7C8493] line-clamp-2 text-right group-hover/reply:text-[#3F3F3F] transition-colors",children:i.content})]}),e.jsx("div",{className:"bg-[#F8F8FD] rounded-lg rounded-tr-none px-4 py-3 text-[#515B6F]",children:E(r)}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.targetedParticipants&&r.targetedParticipants.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-[#939393]",children:["To:"," ",r.targetedParticipants.map(c=>c.role).join(", ")]}),e.jsx("span",{className:"text-xs text-[#D6DDEB]",children:"•"})]}),e.jsx("p",{className:"text-xs text-[#7C8493]",children:oe(r.createdAt)})]})]}),e.jsxs($,{className:"h-10 w-10 flex-shrink-0",children:[e.jsx(K,{src:a.avatar}),e.jsx(W,{className:"text-xs",children:a.initials})]})]}):e.jsxs("div",{className:"flex items-start gap-3 max-w-[85%] group pr-8",children:[e.jsxs($,{className:"!size-10 flex-shrink-0",children:[e.jsx(K,{src:a.avatar}),e.jsx(W,{className:"text-xs",children:a.initials})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"font-semibold text-[#25324B] text-sm",children:[a.name,a.role&&e.jsxs("span",{className:"text-xs text-[#939393] ml-2 capitalize",children:["(",a.role,")"]})]})}),e.jsx("button",{onClick:()=>ee(r),className:"text-xs text-primary hover:underline opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:"Reply"})]}),r.replyTo&&i&&u&&e.jsxs("button",{onClick:()=>k(r.replyTo),className:"w-full text-left bg-gray-50/80 border-l-3 border-primary/40 rounded-r px-3 py-2 mb-2 hover:bg-gray-100 hover:border-primary/60 transition-all cursor-pointer group/reply",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-3 h-3 text-primary/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),e.jsx("span",{className:"text-xs font-medium text-[#646464]",children:u.name})]}),e.jsx("p",{className:"text-xs text-[#7C8493] line-clamp-2 group-hover/reply:text-[#3F3F3F] transition-colors",children:i.content})]}),r.messageType==="file"?e.jsxs("div",{className:"flex items-center gap-3 py-3 px-4 bg-white border border-[#D6DDEB] rounded-[4px]",children:[e.jsx(de,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:"File Attachment"})]}):e.jsx("div",{className:"bg-white border border-[#D6DDEB] rounded-lg px-4 py-3",children:E(r)}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-xs text-[#7C8493]",children:oe(r.createdAt)}),r.targetedParticipants&&r.targetedParticipants.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-[#D6DDEB]",children:"•"}),e.jsxs("p",{className:"text-xs text-[#939393]",children:["To:"," ",r.targetedParticipants.map(c=>c.role).join(", ")]})]})]})]})]})},r.id)})}):e.jsx("div",{className:"flex justify-center items-center h-[200px] border border-dashed border-[#E7E7E7] rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No messages yet"})})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-[#E7E7E7]",children:e.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-2 rounded-xl border border-[#E7E7E7] focus-within:border-primary/50 focus-within:ring-1 focus-within:ring-primary/50 transition-all",children:[e.jsx("input",{type:"text",value:g,onChange:r=>w(r.target.value),placeholder:"Type your message here...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm text-[#3F3F3F] placeholder:text-[#939393] px-2 outline-none",onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),g.trim()&&(x(null),t(!0)))}}),e.jsx(Q,{className:" p-0 rounded-lg bg-primary hover:bg-primary/90 flex items-center justify-center transition-colors cursor-pointer",onClick:()=>{x(null),t(!0)},disabled:!g.trim(),children:e.jsx(Me,{className:" text-white"})})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(ie,{className:"bg-white rounded-[4px] px-4 md:px-6 py-6 sticky top-4",children:[((R=s.order)==null?void 0:R.buyer)&&e.jsxs("div",{className:"mb-6 pb-6 border-b border-[#E7E7E7]",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Buyer Information"}),e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsxs($,{className:"size-12",children:[e.jsx(K,{src:(B=s.order.buyer.userDetails)==null?void 0:B.avatar}),e.jsx(W,{children:se(s.order.buyer)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:te(s.order.buyer)}),((M=s.order.buyer.userDetails)==null?void 0:M.username)&&e.jsxs("p",{className:"text-xs text-[#939393]",children:["@",s.order.buyer.userDetails.username]})]})]}),e.jsxs("div",{className:"space-y-2",children:[((P=s.order.buyer.userDetails)==null?void 0:P.telephone)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#939393]",children:[e.jsx(me,{className:"h-3 w-3"}),e.jsx("span",{children:s.order.buyer.userDetails.telephone})]}),s.order.buyer.email&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#939393]",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsx("span",{children:s.order.buyer.email})]})]})]}),((T=s.order)==null?void 0:T.seller)&&e.jsxs("div",{className:"mb-6 pb-6 border-b border-[#E7E7E7]",children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Seller Information"}),e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsxs($,{className:"size-12",children:[e.jsx(K,{src:(z=s.order.seller.userDetails)==null?void 0:z.avatar}),e.jsx(W,{children:se(s.order.seller)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:te(s.order.seller)}),((L=s.order.seller.userDetails)==null?void 0:L.username)&&e.jsxs("p",{className:"text-xs text-[#939393]",children:["@",s.order.seller.userDetails.username]})]})]}),e.jsxs("div",{className:"space-y-2",children:[((U=s.order.seller.userDetails)==null?void 0:U.telephone)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#939393]",children:[e.jsx(me,{className:"h-3 w-3"}),e.jsx("span",{children:s.order.seller.userDetails.telephone})]}),s.order.seller.email&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#939393]",children:[e.jsx(xe,{className:"h-3 w-3"}),e.jsx("span",{children:s.order.seller.email})]})]})]}),s.user&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-semibold text-black mb-4",children:"Raised By"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs($,{className:"size-10",children:[e.jsx(K,{src:(q=s.user.userDetails)==null?void 0:q.avatar}),e.jsx(W,{children:se(s.user)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#3F3F3F]",children:te(s.user)}),((_=s.user.userDetails)==null?void 0:_.username)&&e.jsxs("p",{className:"text-xs text-[#939393]",children:["@",s.user.userDetails.username]})]})]})]})]})})]}),e.jsx(ze,{isOpen:l,onClose:()=>{t(!1),x(null)},dispute:s,replyToMessage:n,initialContent:g}),e.jsx(Ee,{open:f,setOpen:o,title:"Are You Sure?",secondaryBtnText:"Resolve",actionType:"default",onSecondaryBtnClick:H,isLoading:V.isPending,children:e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to resolve this dispute?"})})]})};export{Oe as default};
